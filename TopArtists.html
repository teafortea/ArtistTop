<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Artists</title>
    <!-- Import Josefin Sans from Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            position: relative;
            width: 900px;
            height: 700px;
            background-color: #00000000;
        }

        .title {
            position: absolute;
            width: 508px;
            height: 100px;
            left: 32px;
            top: 68px;
            font-family: 'Josefin Sans', sans-serif;
            font-style: normal;
            font-weight: 700;
            font-size: 100px;
            line-height: 100px;
            color: #F8396F;
        }

        .artists {
            position: absolute;
            width: 832px;
            height: 480px;
            left: 129px;
            top: 185px;
            font-family: 'Josefin Sans', sans-serif;
            font-style: normal;
            font-weight: 700;
            font-size: 80px;
            line-height: 80px;
            color: #FFFFFF;
        }
    </style>
</head>
<body>
    <div class="artists" id="artists"></div>
    <canvas id="canvas" width="973" height="731" style="display: none;"></canvas>

    <script>
function getURLParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}

window.onload = function() {
    const artistsParam = getURLParameter('artists');
    if (artistsParam) {
        const artistsText = decodeURIComponent(artistsParam);
        document.getElementById('artists').innerText = artistsText;

        // Draw the text on the canvas
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // Set font and styles
        const titleFont = '100px \'Josefin Sans\', sans-serif';
        const artistsFont = '80px \'Josefin Sans\', sans-serif';

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw title
        ctx.font = titleFont;
        ctx.fillStyle = '#F8396F';
        ctx.fillText('Top Artists', 32, 168);

        // Draw artists
        ctx.font = artistsFont;
        ctx.fillStyle = '#FFFFFF';

        // Handle line breaks for artists
        const lineHeight = 80;
        const lines = artistsText.split('\n');
        for (let i = 0; i < lines.length; i++) {
            ctx.fillText(lines[i], 129, 265 + i * lineHeight);
        }

        // Convert canvas content to Base64 URL
        const base64URL = canvas.toDataURL();
        // Store URL in dictionary with associated metadata
        imageURLs['top_artists_image'] = {
            url: base64URL,
            metadata: {
                artists: artistsText,
                timestamp: new Date().toISOString()
            }
        };
        // Display the image
        document.getElementById('outputImage').src = base64URL;
        document.getElementById('outputImage').style.display = 'block';
    }
}
    </script>
</body>
</html>
